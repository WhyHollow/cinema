import{d as S,r as _,c as O,a,b as t,w as j,v as E,F as f,e as k,f as v,h as l,t as u,n as z,u as i,k as b,o as L,i as w,l as R,m as U}from"./index-CtqZGGt3.js";import{u as A,O as q,S as G}from"./optimized-image-C4RLPalC.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"mb-4"},J=["value"],K={key:0,class:"mb-4"},Q={class:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-2"},W=["onClick"],X=S({__name:"session-picker",props:{sessions:{}},emits:["selectTime"],setup(y,{emit:x}){const c=y,n=x,r=_(""),d=_(""),p=O(()=>{const s=c.sessions.find(e=>e.showdate===r.value);return s?s.daytime.split(";"):[]}),g=s=>{d.value=s,n("selectTime",{showdate:r.value,daytime:s})};return(s,e)=>(l(),a("div",null,[t("div",H,[e[2]||(e[2]=t("label",{for:"datePicker",class:"block text-lg font-semibold mb-2"},"Оберіть дату:",-1)),j(t("select",{id:"datePicker","onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),class:"border rounded px-4 py-2"},[e[1]||(e[1]=t("option",{value:"",disabled:""},"Оберіть дату",-1)),(l(!0),a(f,null,k(s.sessions,o=>(l(),a("option",{key:o.showdate,value:o.showdate},u(o.showdate),9,J))),128))],512),[[E,r.value]])]),p.value.length?(l(),a("div",K,[e[3]||(e[3]=t("label",{for:"timePicker",class:"block text-lg font-semibold mb-2"},"Оберіть час:",-1)),t("ul",Q,[(l(!0),a(f,null,k(p.value,o=>(l(),a("li",{key:o,class:z(["border rounded p-2 text-center shadow-md hover:shadow-lg transition cursor-pointer",{"bg-blue-500 text-white":o===d.value,"border-gray-300 text-gray-700 hover:bg-gray-100":o!==d.value}]),onClick:h=>g(o)},u(o),11,W))),128))])])):v("",!0)]))}}),Y={class:"space-y-6"},Z={class:"text-lg font-semibold text-gray-800 mb-4"},ee={class:"grid grid-cols-8 gap-3"},te=["disabled","onClick"],se={key:0,class:"mt-4 p-4 border rounded-lg shadow-md bg-white"},oe={class:"text-gray-700"},le={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},ne={class:"p-6 bg-white rounded-lg shadow-lg w-96"},ae={class:"text-gray-700"},ie={class:"text-gray-700"},re={class:"text-gray-700"},de={class:"text-gray-700"},ue={class:"text-gray-700"},ce=S({__name:"place-picker",props:{rows:{}},emits:["bookPlace"],setup(y,{emit:x}){const c=_(null),n=x,r=A(),d=_(null),p=(s,e)=>{d.value={row:s,seat:e}},g=()=>{d.value&&(n("bookPlace",d.value),d.value=null)};return(s,e)=>(l(),a("div",Y,[(l(!0),a(f,null,k(s.rows,o=>{var h,$,P,T,C,D,B,M,I;return l(),a("div",{key:o[0].row,class:"p-6 border rounded-lg shadow-md bg-white"},[t("h3",Z,"Ряд "+u(o[0].row),1),t("div",ee,[(l(!0),a(f,null,k(o[1],m=>{var N,V;return l(),a("button",{key:m.seat,disabled:!m.is_free,class:z([{"bg-blue-500 text-white":((N=d.value)==null?void 0:N.row)===o[0].row&&((V=d.value)==null?void 0:V.seat)===m.seat,"hover:bg-blue-500 hover:text-white":m.is_free,"bg-gray-300 text-gray-700":!m.is_free,"border-gray-300 text-gray-700":!0},"px-3 py-2 text-sm font-medium rounded-lg border transition duration-200 ease-in-out"]),onClick:ye=>p(o[0].row,m.seat)},u(m.seat),11,te)}),128))]),((h=d.value)==null?void 0:h.row)===o[0].row?(l(),a("div",se,[e[1]||(e[1]=t("h3",{class:"text-lg font-semibold text-gray-800"},"Вибране місце",-1)),t("p",oe,"Ряд: "+u(($=d.value)==null?void 0:$.row)+", Місце: "+u((P=d.value)==null?void 0:P.seat),1),t("button",{class:"mt-4 px-4 py-2 bg-green-500 text-white font-medium rounded-lg hover:bg-green-600 transition duration-200 ease-in-out",onClick:g}," Підтвердити бронювання ")])):v("",!0),i(r).bookingStatus?(l(),a("div",le,[t("div",ne,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Бронювання успішне!",-1)),t("p",ae,[e[2]||(e[2]=t("strong",null,"Фільм ID:",-1)),b(" "+u((T=i(r).bookingStatus)==null?void 0:T.movie_id),1)]),t("p",ie,[e[3]||(e[3]=t("strong",null,"Ряд:",-1)),b(" "+u((C=i(r).bookingStatus)==null?void 0:C.row)+", ",1),e[4]||(e[4]=t("strong",null,"Місце:",-1)),b(" "+u((D=i(r).bookingStatus)==null?void 0:D.seat),1)]),t("p",re,[e[5]||(e[5]=t("strong",null,"Дата:",-1)),b(" "+u((B=i(r).bookingStatus)==null?void 0:B.showdate),1)]),t("p",de,[e[6]||(e[6]=t("strong",null,"Час:",-1)),b(" "+u((M=i(r).bookingStatus)==null?void 0:M.daytime),1)]),t("p",ue,[e[7]||(e[7]=t("strong",null,"Ключ квитка:",-1)),b(" "+u((I=i(r).bookingStatus)==null?void 0:I.ticketkey),1)]),t("button",{class:"mt-4 px-4 py-2 bg-green-500 text-white font-medium rounded-lg hover:bg-green-600 transition duration-200 ease-in-out",onClick:e[0]||(e[0]=m=>c.value=null)}," Закрити ")])])):v("",!0)])}),128))]))}}),ge=F(ce,[["__scopeId","data-v-fcf25a87"]]),me={class:"container mx-auto px-4 py-8"},be={key:0,class:"mb-8"},ve={class:"flex flex-col gap-6"},pe={class:"flex flex-col flex-grow"},xe={class:"text-3xl font-bold mb-4"},_e={key:0},fe={key:1,class:"mt-8"},ke=S({__name:"MovieDetails",setup(y){const x=U(),c=Number(x.params.id),n=A(),r=_(!1),d=async({showdate:g,daytime:s})=>{await n.fetchAvailablePlaces(c,g,s),r.value=!0},p=async g=>{const{selectedSession:s}=n;s&&await n.bookPlace(c,g,s.showdate,s.daytime)};return L(async()=>{await n.fetchMovieDetails(c),await n.fetchSessions(c)}),(g,s)=>(l(),a("div",me,[i(n).movie?(l(),a("div",be,[t("div",ve,[w(q,{url:i(n).movie.image,alt:i(n).movie.name,class:"w-full lg:w-1/3 h-auto rounded shadow-md"},null,8,["url","alt"]),t("div",pe,[t("h1",xe,u(i(n).movie.name),1),w(G,{rawText:i(n).movie.description,class:"text-gray-700 mb-6"},null,8,["rawText"]),i(n).parsedAdditional?(l(),a("div",_e,[s[0]||(s[0]=t("h2",{class:"text-xl font-bold mb-4"},"Додаткова інформація",-1)),t("ul",null,[(l(!0),a(f,null,k(i(n).parsedAdditional,(e,o)=>(l(),a("li",{key:o},[t("strong",null,u(o)+":",1),b(" "+u(e),1)]))),128))])])):v("",!0)])])])):v("",!0),i(n).sessions.length?(l(),a("div",fe,[s[1]||(s[1]=t("h2",{class:"text-2xl font-bold mb-4"},"Сеанси",-1)),w(X,{sessions:i(n).sessions,onSelectTime:d},null,8,["sessions"])])):v("",!0),r.value?(l(),R(ge,{key:2,rows:i(n).availablePlaces,onBookPlace:p},null,8,["rows"])):v("",!0)]))}}),$e=F(ke,[["__scopeId","data-v-82dcf7fc"]]);export{$e as default};
